{
  "dimensions": [{
    "name": "movement",
    "levels": [{
      "name": "kv",
      "attributes": ["kvtype"]
    }, {
      "name": "product",
      "attributes": ["product_name", "product_code"]
    }, {
      "name": "facility",
      "attributes": ["facility_name"]
    }, {
      "name": "entry",
      "attributes": ["movement_type", "movement_date", "quantity", "signature"]
    }]
  }, {
    "name": "stock",
    "levels": [{
      "name": "kv",
      "attributes": ["kvtype"]
    }, {
      "name": "others",
      "attributes": ["latest_soh", "product_name", "product_code", "facility_name", "expiration"]
    }]
  }],
  "cubes": [{
    "name": "stock_cards",
    "dimensions": ["movement", "stock"],
    "mappings": {
      "movement.movement_type": "stock_card_entries.adjustmenttype",
      "movement.movement_date": "stock_card_entries.createddate",
      "movement.quantity": "stock_card_entries.quantity",
      "movement.product_name": "products.primaryname",
      "movement.facility_name": "facilities.name",
      "movement.product_code": "products.code",
      "movement.signature": "stock_card_entry_key_values.valuecolumn",
      "movement.kvtype": "stock_card_entry_key_values.keycolumn",

      "stock.latest_soh": "totalquantityonhand",
      "stock.product_name": "products.primaryname",
      "stock.product_code": "products.code",
      "stock.facility_name": "facilities.name",
      "stock.kvtype": "stock_card_entry_key_values.keycolumn",
      "stock.expiration": "stock_card_entry_key_values.valuecolumn"
    },
    "joins": [{
      "master": "stock_card_entries.id",
      "detail": "stock_card_entry_key_values.stockcardentryid"
    }, {
      "master": "id",
      "detail": "stock_card_entries.stockcardid"
    }, {
      "master": "productid",
      "detail": "products.id"
    }, {
      "master": "facilityid",
      "detail": "facilities.id"
    }]
  }]
}
